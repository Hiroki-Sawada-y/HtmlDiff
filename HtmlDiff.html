<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
  <TITLE>Diff, Match and Patch: Demo of Patch</TITLE>
  <SCRIPT SRC="./diff_match_patch.js"></SCRIPT>
  <SCRIPT SRC="./htmldiff.js"></SCRIPT>
  
<style>
  ins {
    color: green;
  }
  del {
    color: red;
  }
  </style>
</HEAD>

<BODY>
<H1>Diff, Match and Patch</H1>
<H2>Demo of Patch</H2>

<P>Two texts can be diffed against each other, generating a list of patches.
These patches can then be applied against a third text.  If the third text has edits of its own, this version of patch
will apply its changes on a best-effort basis, reporting which patches succeeded and which failed.</P>

<P>In this scenario Shakespeare wrote Hamlet in Early Modern English, the source document.  Then two derivative
works were created.  One is Hamlet updated to Modern English.  The other is a Star Trek parody in Early Modern English.
This demonstrantion creates a list of patches between the source and the Modern English version.  Then it
applies those patches onto the Star Trek parody, thus creating a Star Trek parody in
Modern English.</P>

<FORM action="#" onsubmit="return false">
  <H3>Shakespeare's copy:</H3>
  <TABLE WIDTH="100%"><TR>
    <TD WIDTH="50%" style="border: #60bd90 1px solid" id="oldHtml"><div>Hamlet: Do you see yonder cloud that's almost in shape of a camel?
      <p>Polonius: By the mass, and 'tis like a camel, indeed.</p>
      Hamlet: Methinks it is like a weasel.
      Polonius: It is backed like a weasel.
      Hamlet: Or like a whale?
      Polonius: Very like a whale.
      -- Shakespeare</div></TD>
    <TD WIDTH="50%" style="border: #60bd90 1px solid" id="newHtml"><div>Hamlet: Do you see the cloud over there that's almost the shape of a camel?
      <div>Polonius: By golly, it is like a camel, indeed.</div>
      Hamlet: I think it looks like a weasel.
      <p>
      Polonius: It is shaped like a weasel.
</p>          Hamlet: Or like a whale?
      Polonius: It's totally like a whale.
      -- Shakespeare
    </div></TD>
  </TR></TABLE>
  <P><INPUT TYPE="button" onClick="diff()" VALUE="Compute Patch"/></P>
</FORM>

<DIV ID="diffdatediv"></DIV>

<table width="100%">
  <tr>
    <td width="50%" id="oldDiffHtml"></td>
    <td width="50%" id="newDiffHtml"></td>
  </tr>
</table>

</BODY>

<SCRIPT>
  function diff() {
    var html1 = document.getElementById('oldHtml').innerHTML;
    var html2 = document.getElementById('newHtml').innerHTML;

    let {time, oldDiffHtml, newDiffHtml} = diff_launch(html1, html2)

    document.getElementById('oldDiffHtml').innerHTML = oldDiffHtml
    document.getElementById('newDiffHtml').innerHTML = newDiffHtml
  }
  
  </SCRIPT>
  </HTML>
